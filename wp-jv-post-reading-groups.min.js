/*
// Scripts for WP JV Post Reading Groups
// @version: 1.5
*/
jQuery(document).ready(function(t){function e(){data={action:"wp_jv_prg_refresh_rg_list",url:ajaxurl,type:"POST"},t.post(ajaxurl,data,function(e){var e=t.parseJSON(e);e.rows.length&&t("#the-list").html(e.rows)})}t("#btnAddNewRG").click(function(){t("#btnAddNewRG").attr("disabled",!0),t("#spnAddRG").show();var a=document.getElementById("jv-new-reading-group-text").value;data={action:"wp_jv_prg_add_new_rg_to_db",url:ajaxurl,type:"POST",dataType:"text",newrg:a,wp_jv_rg_nonce:wp_jv_prg_obj.wp_jv_rg_nonce},t.post(ajaxurl,data,function(t){t.error?alert(t.error_msg+"\n\n[Error: "+t.error_code+"]"):e()}),t("#spnAddRG").hide(),t("#btnAddNewRG").attr("disabled",!1),document.getElementById("jv-new-reading-group-text").value=""}),t(".lnkEdit").live("click",function(a){a.preventDefault(),t.ajaxSetup({async:!1}),e(),t.ajaxSetup({async:!0});var r=t(this).attr("data-RG");t(".RenameDiv-"+r).html('<input type="text" id="renamed-reading-group-text" style="width:100%" value="'+t("div.ItemDiv-"+r).text()+'"><br><button class="btnCancel button-secondary">Cancel</button><button style="float:right" class="btnSave button-primary" data-rename-RG="'+r+'">Save</button>')}),t(".btnCancel").live("click",function(t){t.preventDefault(),e()}),t(".btnSave").live("click",function(a){a.preventDefault(),t(".btnSave").attr("disabled",!0);var r=document.getElementById("renamed-reading-group-text").value,n=t(this).attr("data-rename-RG");data={action:"wp_jv_prg_save_renamed_rg_to_db",url:ajaxurl,type:"POST",dataType:"text",RGToRename:n,NewRGName:r},t.post(ajaxurl,data,function(t){t.error?alert(t.error_msg+"\n\n[Error: "+t.error_code+"]"):e()}),t(".btnSave").attr("disabled",!1)}),t(".lnkDelete").live("click",function(a){a.preventDefault();var r=jQuery(this).attr("href");data={action:"wp_jv_prg_delete_rg",url:ajaxurl,type:"POST",delurl:r},t.post(ajaxurl,data,function(t){t.error?alert(t.error_msg+"\n\n[Error: "+t.error_code+"]"):e()})})});